@{
    ViewData["Title"] = "Index";

}
@model BMIModel

<div>
    <a href="/Home" class="btn btn-success btn-block">Go To Homepage</a>
</div>

<form class="form" id="form" asp-action="Index" asp-asp-controller="BMIapp" method="post">
    <div class="container ">
        <h1>BMI Calculator</h1>

        <label>
            <input type="text" class="text-input" asp-for="Height" id="h-input" placeholder="Enter Your Height in Centimeters: ">
        </label>
        <label>
            <input type="text" class="text-input" asp-for="Weight" id="w-input" placeholder="Enter Your Weight in Kilogrames: ">
        </label>
        <a href="#" onclick="ClearPage()" class="btn btn-sm  btn-warning" id="clear">Clear</a>
        <button type="submit" id="submit" value="submit">Calculate BMI</button>

        <div class="bmi-value">
            <h4>BMI Value: </h4>
            <div id="bmi-output"></div>
        </div>
        <div class="status">
            <h4>Status: </h4>
            <div id="bmi-status"></div>
        </div>

    </div>
</form>

@section Scripts{


    <script>

        function ClearPage() {
            document.getElementById("h-input").value = "";
            document.getElementById("w-input").value = "";
            document.getElementById("bmi-output").innerHTML = "";
            document.getElementById("bmi-status").innerHTML = "";


        }


    </script>

    
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>

    <script>

        document.getElementById('form').addEventListener("submit", (e) => {
            e.preventDefault();

            var h = document.getElementById("h-input").value;
            var w = document.getElementById("w-input").value;

            $.ajax(
                {
                    url: '@Url.Action("Index","BMIapp")',
                    type: "POST",
                    data: {
                        Height: parseFloat(h), Weight: parseFloat(w)
                    },
                    success: function (data) {
                       var data2= JSON.parse(data);
                       
                        document.getElementById("bmi-output").textContent = data2.BMI;
                        document.getElementById("bmi-status").textContent = data2.BMIRange;
                    },
                    error: function (err) {
                        alert(err.statusText + " " + err.url)
                    }
                });
        });




    </script>
    }


@section addBmiCss{
    <link href="~/css/BMIStyle.css" rel="stylesheet" />
    }






